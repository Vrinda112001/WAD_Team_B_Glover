{% extends 'glover/base.html' %}
{% load staticfiles %}

{% block title_block %}
    Discover
{% endblock %}

{% block body_block %}
    <h1>Glover says...</h1>
    <div>
        {% if user.is_authenticated %}
            Sup {{ user.username }}!
        {% else %}
            hey there partner!
        {% endif %}
        <br />
    </div> 
    <div>
        <h2>Discover</h2>
        {% if profiles %}
        <ul>
            {% for profile in profiles %}
                {% if user != profile.user %}
                <li>
                    <a href="{% url 'glover:discover_profile' profile.user.username %}">{{ profile.user.username }}</a>

                    <form id="like" method="post" action="{% url 'glover:like' user.username profile.user.username %}">
                        {% csrf_token %}
                        <div class="btn-group">
                            <button type="submit" name="like" class="btn btn-success">Like</button>
                            <button type="submit" name="dislike" class="btn btn-danger">Dislike</button>
                        </div>
                    </form>
                </li>

                {% endif %}
            {% endfor %}
        </ul>
        {% else %}
            <strong>There's no one here.</strong>
        {% endif %}
    </div>
    {% if user.is_authenticated %}
        <a href="{% url 'glover:matches' %}">Matches</a>
        <a href="{% url 'glover:logout' %}">Logout</a>
        <a href="{% url 'glover:profile' %}">Profile</a>
    {% endif %}
{% endblock %}