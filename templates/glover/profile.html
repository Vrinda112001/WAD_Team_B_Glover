{% extends 'glover/base.html' %}
{% load staticfiles %}

{% block title_block %}
	My Profile
{% endblock %}

{% block body_block %}

<div class="container">
	<h1 class="text-center mb-4 BigHeadings"><strong>My Profile</strong></h1>
	<div class="row my-5">

		<div class="col-sm-12 col-lg-6">
			<div id="carouselExampleIndicators" class="carousel slide col-lg-12 mb-5" data-ride="carousel">
				<ol class="carousel-indicators">
					<li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
					{% if user.profile.image2 %}
						<li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
					{% endif %}
					{% if user.profile.image3 %}
						<li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
					{% endif %}
					{% if user.profile.image4 %}
						<li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
					{% endif %}
					{% if user.profile.image5 %}
						<li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
					{% endif %}
				</ol>
				<div class="carousel-inner">
					<div class="carousel-item active">
						{% if user.profile.image1 %}
							<img class="d-block w-100" src="{{ user.profile.image1.url }}" alt="First slide">
						{% else %}
							<img class="d-block w-100" src="{% static 'images/default_user.jpg' %}" alt="First slide">
						{% endif %}
					</div>
					{% if user.profile.image2 %}
						<div class="carousel-item">
							<img class="d-block w-100" src="{{ user.profile.image2.url }}" alt="Second slide">
						</div>
					{% endif %}
					{% if user.profile.image3 %}
						<div class="carousel-item">
							<img class="d-block w-100" src="{{ user.profile.image3.url }}" alt="Third slide">
						</div>
					{% endif %}
					{% if user.profile.image4 %}
						<div class="carousel-item">
							<img class="d-block w-100" src="{{ user.profile.image4.url }}" alt="Fourth slide">
						</div>
					{% endif %}
					{% if user.profile.image5 %}
						<div class="carousel-item img-fluid">
							<img class="d-block w-100" src="{{ user.profile.image5.url }}" alt="Fifth slide">
						</div>
					{% endif %}
				</div>
				<a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
					<span class="carousel-control-prev-icon" aria-hidden="true"></span>
					<span class="sr-only">Previous</span>
				</a>
				<a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
					<span class="carousel-control-next-icon" aria-hidden="true"></span>
					<span class="sr-only">Next</span>
				</a>
			</div>

			<div class="flex-container row col-lg-12 justify-content-md-center px-0 m-0">
				{% if user.profile.image1 %}
					<div class="flex-item">
						<img class="small-img img-responsive" src="{{ user.profile.image1.url }}" alt="Picture of {{ user.first_name }}"/>
					</div>
				{% endif %}

				{% if user.profile.image2 %}
					<div class="flex-item">
						<img class="small-img img-responsive" src="{{ user.profile.image2.url }}" alt="Picture of {{ user.first_name }}"/>
					</div>
				{% endif %}

				{% if user.profile.image3 %}
					<div class="flex-item">
						<img class="small-img img-responsive" src="{{ user.profile.image3.url }}" alt="Picture of {{ user.first_name }}"/>
					</div>
				{% endif %}

				{% if user.profile.image4 %}
					<div class="flex-item">
						<img class="small-img img-responsive" src="{{ user.profile.image4.url }}" alt="Picture of {{ user.first_name }}"/>
					</div>
				{% endif %}

				{% if user.profile.image5 %}
					<div class="flex-item">
						<img class="small-img img-responsive" src="{{ user.profile.image5.url }}" alt="Picture of {{ user.first_name }}"/>
					</div>
				{% endif %}
			</div>
		</div>
		

		<div class="col-sm-12 col-md-6 col-lg-6">

			<p>Name: {{ profile.user.first_name }}</p>
			<p>Gender: {{ profile.get_gender_display }}</p>
			<p>Age: {{ profile.get_age }}</p>
			<p>Bio: {{ profile.bio }}</p>
			<p>Location: {{ profile.location }}</p>
			<p>Favourite Library Floor: {{ profile.library_floor }}</p>
			<p>Looking For: {{ profile.get_looking_for_display }}</p>
			<p>Studies: {{ profile.course.course }}</p>
			<p>Year of Study: {{ profile.year_in }}</p>
		</div>
	</div>

	<div class="row my-5">
		<div class="col-sm-12 col-md-6 col-lg-6">
			<p>Interests:
			<ul>
			{% for interest in profile.get_interests %}
				<li> {{ interest.interest }} </li>
			{% endfor %}
			</ul>
			</p>
		</div>
		<div class="col-sm-12 col-md-6 col-lg-6">
			<p>Societies:
			<ul>
			{% for society in profile.get_societies %}
				<li> {{ society.society }} </li>
			{% endfor %}
			</ul>
			</p>
		</div>
	</div>

	<div class="row btn-toolbar justify-content-center my-5">
	    <a class="btn btn-warning btn-sm mr-2" href="{% url 'glover:edit-profile' %}">Edit Profile</a>
	    <a class="btn btn-warning btn-sm mr-2" href="{% url 'glover:edit-photos' %}">Edit Photos</a>
	</div>

</div>

{% endblock %}

{% block js %}

<script>

$(document).ready(function() {

	$(".carousel").carousel({
		interval: 3000
	})

	var images = $(".small-img")
	if (images.length > 1) {
		for (let i=0; i < images.length; i++) {
			var image = images[i]
			$(image).on("click", function() {
				$(".carousel").carousel(i)
				$(".carousel").carousel("pause")
			})
		}
	}
});

</script>
{% endblock %}
